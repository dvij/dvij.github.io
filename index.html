<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krishnamurthy (Dj) Dvijotham - Research Lead</title>
    <link rel="stylesheet" href="new_styles.css">
</head>
<body>
<body>
    <div class="container">
        <header>
            <h1 class="profile-name">Krishnamurthy (Dj) Dvijotham</h1>
            <p class="profile-title">Research Scientist</p>
            <p class="profile-contact">
                <a href="mailto:dvij@cs.washington.edu">dvij@cs.washington.edu</a>
            </p>
            <div class="profile-links">
                <a href="https://scholar.google.com/citations?user=BUtloecAAAAJ&hl=en">Google Scholar</a>
                <a href="https://twitter.com/djdvij">Twitter</a>
            </div>
        </header>

        <main>
            <section id="about">
                <h2>About Me</h2>
                <p>I am a research scientist with several years of industry experience, particularly in building safe, reliable and trustworthy AI systems. A common thread through most of my work being the use of mathematical tools (particularly from mathematical optimization and control theory) to improve the robustness and security of real world systems.</p>
            </section>

            <section id="publications">
                <h2>Selected Publications</h2>
                <p>Please visit <a href="https://scholar.google.com/citations?user=BUtloecAAAAJ&hl=en"> my google scholar page</a> for a complete list of publications, selected representative publications are listed below</p>
                <ul id="publication-list" class="publication-list"></ul>
            </section>

            <section id="mentoring">
                <h2>Past and current advisees</h2>
                     I have been fortunate to work with some wonderful student collaborators over the years (if you should be on this list but aren't please reach out):
                    <li>
                        <h4>2024</h4>
                        <p><a href="https://collinskatie.github.io/">Katherine Collins</a> (PhD student at University of Cambridge)</p>
                        <p><a href="https://krishnap25.github.io/">Krishna Pillutla</a> (Postdoc at Google Research -> Faculty at IIT Madras)</p>
                        <p><a href="https://saiyuelyu.github.io/">Saiyue Lu</a> (PhD student at UBC Vancouver)</p>
                        <p><a href="https://scholar.google.com/citations?user=2qhIm78AAAAJ&hl=en">Joshua Kazdan</a> (PhD student at Stanford)</p>
                    </li>
                    <li>
                        <h4>2023</h4>
                        <p><a href="https://rabanser.dev/">Stephan Rabanser</a> (PhD student at University of Toronto)</p>
                        <p><a href="https://www.rishabhtiwari.org/">Rishabh Tiwari</a> (Predoctoral fellow at Google Research -> PhD Student at UC Berkeley)</p>
                        <p><a href="https://kothasuhas.github.io/">Suhas Kotha</a> (Undegraduate at CMU -> PhD Student at Stanford)</p>
                    </li>
                </ul>
            </section>

            <section id="background">
                <h2>Past Affiliations</h2>
                <ul>
                    <li class="affiliation">
                        <h3><a href="https://deepmind.google/">Google DeepMind</a></h3>
                        <p>Researcher (2017-2024)</p>
                    </li>
                    <li class="affiliation">
                        <h3><a href="https://pnnl.gov">Pacific Northwest National Laboratory</a></h3>
                        <p>Researcher (2016-2017)</p>
                    </li>
                    <li class="affiliation">
                        <h3><a href="https://cmi.caltech.edu/">Center for Mathematics of Information, Caltech</a></h3>
                        <p>Postdoctoral Fellow</p>
                    </li>
                </ul>
            </section>
        </main>

 <script>
        // Simple BibTeX parser
        function parseBibtex(bibtex) {
            const entries = [];
            const entryRegex = /@(\w+)\s*\{([^,]*),\s*((?:[^=,\s]+\s*=\s*(?:\{(?:\{.*?\}|.)*?\}|"(?:\\"|[^"])*"|[^,\s]*)\s*,?\s*)*)\}/g;
            const fieldRegex = /(\w+)\s*=\s*(\{(?:\{.*?\}|.)*?\}|"(?:\\"|[^"])*"|[^,\s]*)/g;

            let match;
            while ((match = entryRegex.exec(bibtex)) !== null) {
                const [, type, key, fieldsString] = match;
                const fields = {};
                let fieldMatch;
                while ((fieldMatch = fieldRegex.exec(fieldsString)) !== null) {
                    let [, name, value] = fieldMatch;
                    value = value.replace(/^\{|\}$/g, '').replace(/\\&/g, '&');
                    fields[name.toLowerCase()] = value;
                }
                entries.push({ type, key, fields });
            }
            return entries;
        }

        // Function to fetch and parse BibTeX file
        async function loadPublications() {
            try {
                console.log('Fetching publications.bib...');
                const response = await fetch('https://raw.githubusercontent.com/dvij/dvij.github.io/master/publications_select.bib');
                const bibtex = await response.text();
                console.log('Fetched bibtex content:', bibtex.substring(0, 100) + '...'); // Log first 100 chars

                console.log('Parsing bibtex...');
                const entries = parseBibtex(bibtex);
                console.log('Parsed entries:', entries);
                displayPublications(entries);
            } catch (error) {
                console.error('Error in loadPublications:', error);
                document.getElementById('publication-list').innerHTML = '<li>Error loading publications. Please check the console for details.</li>';
            }
        }

        function displayPublications(entries, filter = 'all') {
        console.log('Displaying publications...');
        const publicationList = document.getElementById('publication-list');
        publicationList.innerHTML = '';
        
        const currentYear = new Date().getFullYear();
        let filteredEntries = entries.filter(entry => {
            if (filter === 'recent') {
                return currentYear - parseInt(entry.fields.year) <= 3;
            }
            return true;
        });

        // Sort entries by year in reverse chronological order
        filteredEntries.sort((a, b) => {
            const yearA = parseInt(a.fields.year) || 0;
            const yearB = parseInt(b.fields.year) || 0;
            if (yearA !== yearB) {
                return yearB - yearA; // Sort by year in descending order
            }
            // If years are equal, sort by month if available
            const monthA = a.fields.month ? getMonthNumber(a.fields.month) : 0;
            const monthB = b.fields.month ? getMonthNumber(b.fields.month) : 0;
            return monthB - monthA;
        });

        if (filteredEntries.length > 0) {
            filteredEntries.forEach((entry, index) => {
                const li = document.createElement('li');
                li.className = 'publication-item';
                if (entry.fields.award === 'best-paper') {
                    li.className += ' award-publication';
                }
                li.innerHTML = formatPublication(entry);
                publicationList.appendChild(li);
            });
            console.log('Publications displayed successfully.');
        } else {
            console.log('No entries to display.');
            publicationList.innerHTML = '<li>No publications found.</li>';
        }
    }

    // Helper function to convert month names/abbreviations to numbers
    function getMonthNumber(month) {
        const months = {
            'jan': 1, 'january': 1,
            'feb': 2, 'february': 2,
            'mar': 3, 'march': 3,
            'apr': 4, 'april': 4,
            'may': 5,
            'jun': 6, 'june': 6,
            'jul': 7, 'july': 7,
            'aug': 8, 'august': 8,
            'sep': 9, 'september': 9,
            'oct': 10, 'october': 10,
            'nov': 11, 'november': 11,
            'dec': 12, 'december': 12
        };
        return months[month.toLowerCase()] || 0;
    }
        const awardIcon = `
            <svg class="award-icon" viewBox="0 0 4 4" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 2.18l7 3.12v4.7c0 4.54-2.77 8.62-7 10.19-4.23-1.57-7-5.65-7-10.19v-4.7l7-3.12z"/>
                <path d="M12 7l-3 3 1 4 2-1 2 1 1-4-3-3z"/>
            </svg>
        `;

        // Function to format a single publication
        function formatPublication(entry) {
            console.log('Formatting entry:', entry);
            if (!entry || !entry.fields) {
                console.error('Invalid entry:', entry);
                return 'Invalid publication entry';
            }
            
            const authors = entry.fields.author ? entry.fields.author.split(' and ').join(', ') : 'Unknown Author';
            const title = entry.fields.title ? entry.fields.title.replace(/[{}]/g, '') : 'Untitled';
            const year = entry.fields.year || 'Unknown Year';
            const venue = entry.fields.journal || entry.fields.booktitle || 'Unknown Publication';
            const url = entry.fields.url || '';
            const blog = entry.fields.blog || '';
            const code = entry.fields.code || '';
            const hasAward = entry.fields.award === 'best-paper';
            const hasStudentAward = entry.fields.award === 'best-student-paper';

            
            let html = `<div class="publication-title">
                ${title}
                ${hasAward ? '<span class="award-label"> (Best Paper) </span>' : ''}
                ${hasStudentAward ? '<span class="award-label"> (Best Student Paper) </span>' : ''}
            </div>`;
            html += `<div class="publication-authors">${authors}</div>`;
            html += `<div class="publication-venue">${venue}, ${year}</div>`;
            if (url) {
                html += `<a href="${url}" target="_blank" class="publication-link">Paper</a>`;
            }
            if (blog) {
                html += `<a href="${blog}" target="_blank" class="publication-link">Blog</a>`;
            }
            if (code) {
                html += `<a href="${code}" target="_blank" class="publication-link">Code</a>`;
            }
            return html;
        }

        // Modified loadPublications function
        async function loadPublications(filter = 'all') {
            try {
                console.log('Fetching publications.bib...');
                const response = await fetch('https://raw.githubusercontent.com/dvij/dvij.github.io/master/publications_select.bib');
                const bibtex = await response.text();
                console.log('Fetched bibtex content:', bibtex.substring(0, 100) + '...'); // Log first 100 chars

                console.log('Parsing bibtex...');
                const entries = parseBibtex(bibtex);
                console.log('Parsed entries:', entries);
                displayPublications(entries, filter);
            } catch (error) {
                console.error('Error in loadPublications:', error);
                document.getElementById('publication-list').innerHTML = '<li>Error loading publications. Please check the console for details.</li>';
            }
        }

        // Load publications when the page loads
        window.onload = function() {
            console.log('Window loaded, setting up filters and loading publications...');
            loadPublications();
        };
    </script>
</body>
</html>
